# Bean Scope
---
## What is Scope?
> 우리는 Spring Bean이 Container의 시작과 함께 종료까지 유지된다고 배웠다.  
> 이것은 Spring Bean이 기본적으로 Singleton Scope로 생성되기 때문인데,  
> __Scope는__ 말 그대로 Spring Bean이 존재할 수 있는 범위를 말한다.  

- Singleton : 기본적인 Scope, 가장 넓은 범위의 Scope이다.
- ProtoType : Prototype Bean의 생성과 DI까지만 생존하는 매우 짧은 범위의 Scope이다.
- Web 관련
  - Request : Request가 들어오고 나갈 때 까지 유지되는 Scope이다.
  - Session : Session이 생성되고 종료될 때 까지 유지되는 Scope이다.
  - Application : Web의 서블릿 컨텍스와 같은 범위이다.

### Prototype Scope
> Singleton Scope의 Bean을 조회하면, 항상 같은 Instance의 Bean을 반환한다.  
> 하지만 Prototype Bean은, 매번 새로운 Instance를 생성해서 반환한다.  

```java
public class PrototypeTest {
    @Test
    void prototypeBeanFind(){
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(PrototypeBean.class);
        System.out.println("Find PrototypeBean1");
        PrototypeBean prototypeBean1 = ac.getBean(PrototypeBean.class);
        System.out.println("Find PrototypeBean2");
        PrototypeBean prototypeBean2 = ac.getBean(PrototypeBean.class);
        System.out.println("prototypeBean1 = " + prototypeBean1);
        System.out.println("prototypeBean2 = " + prototypeBean2);
        Assertions.assertThat(prototypeBean1).isNotSameAs(prototypeBean2);

        ac.close();
    }

    @Scope("prototype")
    static class PrototypeBean{
        @PostConstruct
        public void init(){
            System.out.println("PrototypeBean.init");
        }
        @PreDestroy
        public void destroy(){
            System.out.println("PrototypeBean.destroy");
        }
    }
}
```  
![image](https://user-images.githubusercontent.com/71700079/149939741-715b7dc1-7c0d-4f3a-a06b-b312ee607d15.png)  
- 위의 결과를 보면, 서로 다른 Bean이 생성되며, 초기화도 2번 진행됨을 알 수 있다.
- 그리고 ```@PreDestroy``` 같은 Method가 실행이 되지를 않는 것을 볼 수 있는데, Container가 생성과 DI, 초기화까지만 관리를 하기 때문이다.
  
